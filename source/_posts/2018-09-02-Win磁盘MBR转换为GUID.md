---
title: Win磁盘MBR转换为GUID
date: 2018-09-02 11:52:32
updated:
tags: [windows,折腾]
description:
keywords:
comments:
image:
categories:
  - 解决方法
---
*为了玄学加快pc启动速度我想把bios从传统启动改为efi,同时系统盘变为gtp,本文记录了如何在保留系统文件的同时无损转换gtp,防止以后又查资料*
**搞机有风险,请务必做好备份,,推荐使用dism++的备份,请看我上一篇[win 备份 重装](https://e1sewhere.github.io/2018/09/01/WIN-%E5%A4%87%E4%BB%BD-%E9%87%8D%E8%A3%85/)的介绍**
<!--more-->
# 工具 #
微PE,U盘,PC
# 操作步骤 #
## 将U盘作为微PE启动盘 ##
方法已经在前一篇介绍,请看[win 备份 重装](https://e1sewhere.github.io/2018/09/01/WIN-%E5%A4%87%E4%BB%BD-%E9%87%8D%E8%A3%85/)的方式二.

## 修改启动方式为uefi ##
**本操作有风险,请确定你的主板支持UEFI启动,近几年的pc都支持**
进入PC的BIOS管理界面-boot,如果你没有更改过就会看到一个'legacy'的值,选中它回车,修改为uefi,如果直接就是uefi那个恭喜你你遇到良心电脑商家了,接下来你不用看了.
修改后保存(f12?)

## MBR转换为GUID ##
*如果在bios 直接使用命令` convert GTP `似乎有丢失文件的风险,我就是用的pe内置工具来转换的*
使用BIOS修改PE U盘最先启动(不同电脑不同,方法自行百度),我的电脑支持f12快速选择启动盘.
进入PE系统-敖梅分区助手-磁盘-MBR/GTP互转-执行操作.
完成
## 添加efi msr分区 ##
*我的磁盘转换后是没有efi分区的,所以要手动添加,msr分区的大小也不合适所以我删除了,重新分的msr分区*
### 删除分区 ###
如果有必要,使用分区助手删除不要的分区,因为要保留系统所以系统主分区不能删掉.
### 添加efi msr ###
我在分区助手里没找到创建msr的方法,所以使用命令行
在pe系统内打开命令行(win+r,然后输出` cmd `回车)输入` diskpart `回车容纳后输入` list disk `回车,列出所有的硬盘;使用` select disk x`x是卷标,选择磁盘,这里我们选择系统盘(一般卷标为0),回车;然后输入这两个命令
` create partition efi size =200 `回车,创建efi分区(200的单位为mb,通常200够用大点也没关系)
` create partition msr size =200 `回车,创建msr分区(200的单位为mb,通常200够用大点也没关系)
也许你只需要创建efi,msr已经有了(如果你没删除的话),这个自己选择
这时进入分区助手查看,我们的系统盘应该有三个分区(至少三个,多了也没关系看你自己),一个主分区ntfs类型,一个msr分区fat32(或者fat16),一个efi分区ntfs类型
### 引导修复 ###
由于修改了引导分区,我们需要引导修复,使用PE内置的引导修复工具,我的桌面上没有就在所有程序里找到了.根具提示选择参数(通常只需要选择引导盘位置)
### 后续 ###
如果你修改了启动盘顺序,你需要修改回来,不然还是U盘启动
也许格式化磁盘后修改然后再用wim恢复系统修复引导会更好,但是这样太久了,目前电脑还要使用,不想尝试.你可以参考知乎的回答
不靠谱装Windows10指南:https://zhuanlan.zhihu.com/p/33366029

实际修改后开始速度并没有可感知的提升